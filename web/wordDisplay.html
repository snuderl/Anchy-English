<div class="inline-flex items-end gap-2 flex-nowrap">
	<div class="w-10 h-24 inline-block align-bottom text-center mx-1 relative flex-shrink-0" ng-repeat="w in pair.english track by $index">
		<!-- 
			Arrow positioned at consistent height
			Container: h-24 (96px)
			Tall boxes: h-14 (56px) at bottom-4 (16px from bottom)
			Tall box top position: 96 - 16 - 56 = 24px from container top
			Arrow positioned higher for better clearance
			Using -top-2 (-8px) ensures no overlap with any character type
		-->
		<span class="text-blue-500 text-2xl animate-pulse absolute -top-2 left-0 right-0 z-10" 
		      ng-if="showArrow($index)">↓</span>
		<div class="w-10 h-10 text-2xl leading-10 font-medium absolute bottom-4" ng-if="skip(w)">{{w}}</div>
		<div ng-if="!skip(w)">
			<!-- 
				NORMAL HEIGHT CHARACTER INPUTS (mapping == 0)
				Examples: a, c, e, m, n, o, r, s, u, v, w, x, z
				Behavior: 
				- Input height: h-10 (standard)
				- Position: bottom-4 (sits on baseline)
				- Text: centered vertically and horizontally
				- Arrow: consistent at -top-2 (comfortable gap above all boxes)
			-->
			<div class="absolute bottom-4 left-0" ng-if="mapping[w] == 0">
				<characterinput 
					ng-if="resuj && !finished"
					character="w" 
					index="$index" 
					word-length="pair.english.length"
					on-character-change="onCharacterChange($index, value, isValid)"
					on-complete="onWordComplete()"
					resuj="resuj" 
					finished="finished">
				</characterinput>
				<div ng-if="!resuj || finished"
					 class="w-10 h-10 text-2xl font-medium border-2 border-gray-300 rounded-md bg-gray-50 transition-all duration-300 flex items-center justify-center"
					 ng-class="{'border-success border-4 bg-green-100 text-green-800 animate-correctPulse': classForWord($index) == 'correct', 'border-danger border-4 bg-red-100 text-red-800 animate-wrongShake': classForWord($index) == 'wrong', 'border-warning border-4 bg-yellow-100 text-yellow-800': classForWord($index) == 'wrong-case'}">{{displayWord($index)}}</div>
			</div>
			
			<!-- 
				TALL CHARACTER INPUTS WITH ASCENDERS (mapping == 1)
				Examples: b, d, f, h, k, l, t, and ALL CAPITAL LETTERS
				Behavior:
				- Input height: h-14 (taller to accommodate ascenders)
				- Position: bottom-4 (sits on baseline, extends upward)
				- Text: centered to show full character height
				- Arrow: consistent at -top-2 (well clear of top border)
			-->
			<div class="absolute bottom-4 left-0" ng-if="mapping[w] == 1">
				<characterinput 
					ng-if="resuj && !finished"
					character="w" 
					index="$index" 
					word-length="pair.english.length"
					on-character-change="onCharacterChange($index, value, isValid)"
					on-complete="onWordComplete()"
					resuj="resuj" 
					finished="finished">
				</characterinput>
				<div ng-if="!resuj || finished"
					 class="w-10 h-14 text-2xl font-medium border-2 border-gray-300 rounded-md bg-gray-50 transition-all duration-300 flex items-center justify-center"
					 ng-class="{'border-success border-4 bg-green-100 text-green-800 animate-correctPulse': classForWord($index) == 'correct', 'border-danger border-4 bg-red-100 text-red-800 animate-wrongShake': classForWord($index) == 'wrong', 'border-warning border-4 bg-yellow-100 text-yellow-800': classForWord($index) == 'wrong-case'}">{{displayWord($index)}}</div>
			</div>
			
			<!-- 
				CHARACTER INPUTS WITH DESCENDERS (mapping == 2)
				Examples: g, j, p, q, y
				Behavior:
				- Input height: h-14 (taller to accommodate descenders)
				- Position: bottom-0 (extends below baseline)
				- Text: aligned to show character at baseline with descender below
				- Arrow: consistent at -top-2 (safe clearance from baseline)
				- Visual effect: Character appears to "hang down" from the baseline
			-->
			<div class="absolute bottom-0 left-0" ng-if="mapping[w] == 2">
				<characterinput 
					ng-if="resuj && !finished"
					character="w" 
					index="$index" 
					word-length="pair.english.length"
					on-character-change="onCharacterChange($index, value, isValid)"
					on-complete="onWordComplete()"
					resuj="resuj" 
					finished="finished">
				</characterinput>
				<div ng-if="!resuj || finished"
					 class="w-10 h-14 text-2xl font-medium border-2 border-gray-300 rounded-md bg-gray-50 transition-all duration-300 flex items-start justify-center pt-1"
					 ng-class="{'border-success border-4 bg-green-100 text-green-800 animate-correctPulse': classForWord($index) == 'correct', 'border-danger border-4 bg-red-100 text-red-800 animate-wrongShake': classForWord($index) == 'wrong', 'border-warning border-4 bg-yellow-100 text-yellow-800': classForWord($index) == 'wrong-case'}">{{displayWord($index)}}</div>
			</div>
		</div>
	</div>
	<span class="text-success text-4xl ml-3 animate-checkmarkPop align-bottom" ng-show="finished">✓</span>
</div> 